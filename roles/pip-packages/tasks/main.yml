- name: Pip install virtualenv
  pip: name=virtualenv executable={{ pip_version }} extra_args='--user' state='latest'

- name: Pip install virtualenvwrapper
  pip: name=virtualenvwrapper executable={{ pip_version }} extra_args='--user' state='latest'

- name: Pip install flake8
  pip: name=flake8 executable={{ pip_version }} extra_args='--user' state='latest'

- name: Configuration file for flake8
  copy:
      src=flake8 dest={{ ansible_env.HOME }}/.config/flake8

- name: virtualenvwrapper directory
  file:
    path=/home/emmanuel/envs state=directory

- name: Virtualenvwrapper directory in bashrc
  lineinfile:
    dest=/home/emmanuel/.bashrc
    line="export WORKON_HOME=$HOME/envs"

- name: Virtualenvwrapper loading in bashrc
  lineinfile:
    dest=/home/emmanuel/.bashrc
    line=". $HOME/.local/bin/virtualenvwrapper.sh"

- name: Virtualenvwrapper postactivate hook
  lineinfile:
    dest=/home/emmanuel/envs/postactivate
    line="cd $VIRTUAL_ENV"
